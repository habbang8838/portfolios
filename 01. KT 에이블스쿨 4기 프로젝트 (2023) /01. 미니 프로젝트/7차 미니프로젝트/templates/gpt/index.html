{% extends 'base.html' %}
{% load static %}
{% block content %}
<main style="margin: 100px;">
    {% csrf_token %}
    <h1 class="display-4" style="margin-bottom: 50px;">Chat GPT</h1><hr>
    <div class="input-group mb-3">
        <textarea style="height: 200px; box-shadow: none;" id="content" class="form-control border" placeholder="chat gpt에게 요청하세요." aria-label="Recipient's username" aria-describedby="button-addon2"></textarea>
        <button style="margin-left: 15px; border-radius: 5px;" class="btn btn-success" type="submit" id="button-addon2">전송</button>
    </div>
    <div class="d-flex justify-content-center" style="margin-top: 40px;">
      <div id='loading'  style="display:none;" class="spinner-border text-primary" role="status">
        <span class="sr-only"></span>
      </div>
    </div>
    <input style="margin-top: 50px; height: 150px; box-shadow: none;" id="answer" class="form-control border" type="text" aria-label="readonly input example" readonly>
</main>
 <hr>
 <script>
    $('#button-addon2').click(function (){

            let content = $('#content').val();
            console.log(content);
            if(content == ""){
                alert('내용을 입력해주세요!');
            }else {
                $('#loading').show();
                $.ajax({
                    url: '/chatgpt/chat',
                    data: {
                        content: content
                    },
                    method: 'POST',
                    success: function (result) {
                        $('#loading').hide();
                        console.log(result);
                        $('#content').val('');
                        $('#answer').val(result);
                    }
                });
            }
        });
 </script>
{% endblock %}

