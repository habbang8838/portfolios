# portfolios
박지수의 데이터 분석 및 AI 포트폴리오 자료 모음입니다.

# 1. BDA 모델링 공모전
CJ 더마켓 주문 내역을 통해 프라임 회원 유무 예측하기 프로젝트

## 데이터 설명

<설명 변수(X)>
product_name (주문한 상품명), net_order_qty(주문 수량), net_order_amt(주문 금액 : 정규화된 수치),
gender(성별), age_grp(연령대 그룹), employee_yn(임직원 유무), order_date(주문 날짜)

<종속 변수(Y)>
prime_yn(프라임 회원 유무)

## 분석에 앞서 설정한 6가지 가설
1) (상품명, 동일 수량)으로 그룹화 하였을 때, 프라임 회원은 일반 회원보다 할인 혜택으로 인해 저렴한 가격으로 구매할 것이다.

2) 프라임 회원은 가장 경제활동이 활발하며, 주부층이 가장 많이 분포하고 있는 30~40대 연령층에 가장 많이 분포할 것이다.

3) 프라임 회원은 남성 회원보다 여성 회원이 더 많을 것이다.

4) 동일 상품에 대해 프라임 회원의 주문 수량이 더 많을 것이다.

5) 구매 품목 중 인기 상품을 구매하는 회원은 프라임 회원이 비프라임 회원보다 비율이 높을 것이다.

6) 주문 번호로 그룹화 하여, 총 구매 금액을 비교하면 프라임 회원이 비프라임 회원보다 높을 것이다.

### 가설 1 검증 : (동일 상품, 수량)에 대한 주문 금액의 비교를 나타내는 변수 추가
1) (동일 상품, 수량)에 대해 프라임 회원이 비프라임 회원보다 큰지 작은지를 나타내는 'is_prime_lower_amt' 변수 추가

### 가설 4 검증 : 주문 수량에 대한 프라임, 비프라임 회원 분포 파악
1) 구매 개수가 36개 이상인 데이터는 모두 2023년 설 선물 세트와 관련있는 데이터였으며, 위에 대한 유무를 나타내는 'bulk' 변수 추가
2) 회원의 주문 총 수량을 비교했을 때, 비교 수량이 9 이상일 때부터 비프라임 회원보다 프라임 회원의 주문 총 수량이 높게 나타나는 경향을 파악하여 'tot_qty_9' 변수 추가

### 가설 5 검증 : 브랜드명, 카테고리 관련 더미 변수, 인기 상품 유무 변수 추가
1) 브랜드별로 파악하기 위해 브랜드명 더미 변수 추가
2) 상품 카테고리별로 분석을 진행하기 위해 카테고리 더미변수 추가(사이트 크롤링)
3) 임직원 및 비임직원 대상 행사 구분 변수 추가
4) 할인이나 한정 등의 행사를 나타내는 파생변수로 'sale', 'limit' 변수 추가
5) 상품명에서 박스 및 이벤트의 유무를 나타내는 변수 'box', 'event' 변수 추가
6) '개', '인분', '번들', '입' 등 여러 개가 묶음으로 들어있는 상품 유무를 나타내는 'multi' 변수 추가
7) 인기 상품의 유무를 나타내는 변수'pop_product' 추가(most_common 함수 적용)

### 가설 6 검증 : 최종 구매 금액의 최대, 평균, 최소 수치 비교
1) 같은 scd별로 그룹화하여 net_order_amt의 합계로, 고객의 최종 구매 금액을 나타내는 "tot_amt" 변수 추가

## 본인이 주도적으로 진행한 분석
1) "is_prime_lower_amt" 변수 추가 : (동일 상품, 수량) 별로 그룹화하여 프라임 회원과 비프라임 회원들의 평균 주문 금액을 계산하여, 프라임 회원들의 주문 금액이 작으면 True, 그렇지 않으면 False를 나타내도록 하였습니다. 분포 결과 True를 나타내는 비율이 약 85.3%, False를 나타내는 비율이 약 14.7%로, True를 나타내는 비율이 압도적이어서 유의미한 변수로 채택하였습니다.

2) 연령대 및 성별별로 프라임 회원의 분포 및 비율 파악 : 연령대 별로 그룹화한 결과, 30-40대 인원이 가장 많은 이용자 수를 기록하였으며, 이용자 수가 많은 만큼 프라임 회원의 수가 높게 나오는 점을 파악하였습니다. 하지만, 프라임 회원의 비율은 40-50%로 비슷하지만, 비교적 높은 연령대(50-60대)에조금 더 높게 나타난 점을 확인했습니다.

3) "tot_qty_9" 변수 추가 : 가설 4를 검증하기 위해 프라임 회원과 비프라임 회원 개인별 주문 품목 개수의 합의 분포를 파악하였으며, 프라임 회원의 주문 건당 주문 상품 개수가 비프라임 회원보다 평균, 중위값이 모두 높게 나타난 점을 확인하였습니다. 위 분석에서 그치지 않고, net_order_qty(총 주문 수량)별로 프라임 회원과 비프라임 회원의 인원 및 비율을 각각의 값과 누적 값을 파악해보았으며 net_order_qty의 합이 9 이상일 때부터, 프라임 회원의 비율이 많은 분포를 나타내었으며, net_order_qty가 각각의 그룹에서 겹치지 않는 범위인 31 이상에서도, 프라임 회원이 약 3.62%, 비프라임 회원이 약 1.70%로 프라임 회원이 2배 이상 높은 값을 차지하는 점을 파악했습니다.
   
4) 브랜드 및 카테고리 변수 추가 : 브랜드는 str.contains() 함수를 사용하여 브랜드별로 주문 건수의 개수를 파악하였으며, 변수의 개수가 너무 많아지는 것을 방지하기 위해 주문 건수가 1,000건 이상인 인기 브랜드의 유무를 나타내는 더미 변수를 추가하였습니다. 카테고리는 BeautifulSoup 모듈을 사용하여, CJ 더마켓 사이트에서 크롤링하였으며, 소규모 카테고리들이 대규모 카테고리 내부에서 순서대로 나눠진 점을 파악하여, 소규모 카테고리를 토대로 대규모 카테고리('밥', 'chan', 'dimsum' 등) 유무를 나타내는 더미 변수를 추가하였습니다.

5) 인기 상품의 유무 파악 : Counter() 함수를 사용하여 상품별로 총 주문 건수를 계산하였으며, most_common(100) 함수를 사용하여, 'pop_product'라는 인기 상품을 나타내는 파생 변수를 추하였습니다. 인기 상품을 구매한 주문 데이터를 토대로 프라임 회원과 비프라임 회원의 비율을 분석해본 결과, 프라임 회원은 약 47.4%, 비프라임 회원은 약 52.6%로 비슷한 수치이지만, 비프라임 회원이 미세하게 더 높은 비율을 차지하였으며, 인기 상품이 아닌 주문 데이터에 대해서도 프라임 회원이 약 56%, 비프라임 회원이 약 44%로 단순 수치상으로 비교해보면 분석에 있어서 크게 유의미한 변수라고 보기는 어렵지만, 특정 인기 상품에 대한 설 행사 및 한정 행사 등의 특이점을 보이는 데이터가 존재할 수 있다고 생각하여 분석에 포함시켰습니다.

